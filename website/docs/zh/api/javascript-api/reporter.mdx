---
title: Reporter
---

# Reporter API

Reporter API å…è®¸ä½ åˆ›å»ºè‡ªå®šä¹‰æµ‹è¯•ç»“æœå¤„ç†å™¨å’Œè¾“å‡ºæ ¼å¼å™¨ã€‚æ­¤æ¥å£æ˜¯å®éªŒæ€§çš„ï¼Œåœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚

> **æ³¨æ„**ï¼šä½¿ç”¨ç¤ºä¾‹å’Œé…ç½®æŒ‡å—ï¼Œè¯·å‚é˜… [æŠ¥å‘Šå™¨æŒ‡å—](/guide/basic/reporters)ã€‚

## ä½¿ç”¨è‡ªå®šä¹‰æŠ¥å‘Šå™¨

é€šè¿‡å®ç° `Reporter` æ¥å£æ¥åˆ›å»ºè‡ªå®šä¹‰æŠ¥å‘Šå™¨ï¼š

```ts
import type { Reporter, TestFileResult } from '@rstest/core';

const customReporter: Reporter = {
  onTestFileStart(test) {
    console.log(`Starting: ${test.testPath}`);
  },

  onTestFileResult(result) {
    console.log(`Finished: ${result.testPath}`);
  },

  onTestRunEnd({ results, duration }) {
    console.log(`All tests completed in ${duration.totalTime}ms`);
  },
};
```

åœ¨é…ç½®ä¸­ä½¿ç”¨è‡ªå®šä¹‰æŠ¥å‘Šå™¨ï¼š

```ts
import { defineConfig } from '@rstest/core';
import { customReporter } from './path/to/custom-reporter';

export default defineConfig({
  reporters: [customReporter],
});
```

## æ¥å£æ¦‚è§ˆ

`Reporter` æ¥å£ä¸ºæµ‹è¯•æ‰§è¡Œæä¾›ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚æ¯ä¸ªé’©å­åœ¨æµ‹è¯•è¿è¡ŒæœŸé—´çš„å…·ä½“æ—¶é—´ç‚¹è¢«è°ƒç”¨ã€‚

> **é‡è¦æç¤º**ï¼šæœ‰å…³æœ€æ–°çš„æ¥å£å®šä¹‰å’Œå®Œæ•´ç±»å‹ç­¾åï¼Œè¯·å‚è€ƒ [æºä»£ç ](https://github.com/web-infra-dev/rstest/blob/main/packages/core/src/types/reporter.ts)ã€‚

### é’©å­ç±»åˆ«

- **æ–‡ä»¶çº§é’©å­**: `onTestFileStart`ã€`onTestFileReady`ã€`onTestFileResult`
- **å¥—ä»¶çº§é’©å­**: `onTestSuiteStart`ã€`onTestSuiteResult`
- **ç”¨ä¾‹çº§é’©å­**: `onTestCaseStart`ã€`onTestCaseResult`
- **è¿è¡Œçº§é’©å­**: `onTestRunStart`ã€`onTestRunEnd`ã€`onUserConsoleLog`ã€`onExit`

### åŸºæœ¬æ¥å£ç»“æ„

```ts
interface Reporter {
  onTestFileStart?(test: TestFileInfo): void;
  onTestFileReady?(test: TestFileInfo): void;
  onTestFileResult?(test: TestFileResult): void;
  onTestSuiteStart?(test: TestSuiteInfo): void;
  onTestSuiteResult?(result: TestResult): void;
  onTestCaseStart?(test: TestCaseInfo): void;
  onTestCaseResult?(result: TestResult): void;
  onTestRunEnd?(context: TestRunEndContext): MaybePromise<void>;
  onUserConsoleLog?(log: UserConsoleLog): void;
  onExit?(): void;
}
```

## ç¤ºä¾‹

### ç®€å•è‡ªå®šä¹‰æŠ¥å‘Šå™¨

```ts
import type { Reporter } from '@rstest/core';

const simpleReporter: Reporter = {
  onTestFileStart(test) {
    console.log(`ğŸ“ ${test.testPath}`);
  },

  onTestCaseResult(result) {
    const status = result.status === 'pass' ? 'âœ…' : 'âŒ';
    console.log(`${status} ${result.name}`);
  },

  onTestRunEnd({ results }) {
    const passed = results.filter((r) => r.status === 'pass').length;
    const failed = results.filter((r) => r.status === 'fail').length;
    console.log(`\nğŸ“Š ${passed} passed, ${failed} failed`);
  },
};
```

### æ–‡ä»¶è¾“å‡ºæŠ¥å‘Šå™¨

```ts
import { writeFileSync } from 'node:fs';
import type { Reporter } from '@rstest/core';

const jsonReporter: Reporter = {
  onTestRunEnd({ results }) {
    const report = {
      timestamp: new Date().toISOString(),
      results: results.map((r) => ({
        path: r.testPath,
        status: r.status,
        duration: r.duration,
        errors: r.errors,
      })),
    };

    writeFileSync('test-report.json', JSON.stringify(report, null, 2));
  },
};
```
